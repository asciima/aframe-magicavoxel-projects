!function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){var r=t[a][1][e];return i(r?r:e)},h,h.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){e("./src/loaders").registerAll()},{"./src/loaders":3}],2:[function(e,t,r){t.exports=THREE.PLYLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.propertyNameMapping={}},THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,load:function(e,t,r,n){var i=this,s=new THREE.XHRLoader(this.manager);s.setResponseType("arraybuffer"),s.load(e,function(e){t(i.parse(e))},r,n)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},bin2str:function(e){for(var t=new Uint8Array(e),r="",n=0;n<e.byteLength;n++)r+=String.fromCharCode(t[n]);return r},isASCII:function(e){var t=this.parseHeader(this.bin2str(e));return"ascii"===t.format},parse:function(e){return e instanceof ArrayBuffer?this.isASCII(e)?this.parseASCII(this.bin2str(e)):this.parseBinary(e):this.parseASCII(e)},parseHeader:function(e){function t(e,t){var r={type:e[0]};return"list"===r.type?(r.name=e[3],r.countType=e[1],r.itemType=e[2]):r.name=e[1],r.name in t&&(r.name=t[r.name]),r}var r=/ply([\s\S]*)end_header\s/,n="",i=0,s=r.exec(e);null!==s&&(n=s[1],i=s[0].length);for(var a,o,l={comments:[],elements:[],headerLength:i},c=n.split("\n"),h=void 0,m=0;m<c.length;m++){var u=c[m];if(u=u.trim(),""!==u)switch(o=u.split(/\s+/),a=o.shift(),u=o.join(" "),a){case"format":l.format=o[0],l.version=o[1];break;case"comment":l.comments.push(u);break;case"element":void 0!==h&&l.elements.push(h),h=Object(),h.name=o[0],h.count=parseInt(o[1]),h.properties=[];break;case"property":h.properties.push(t(o,this.propertyNameMapping));break;default:console.log("unhandled",a,o)}}return void 0!==h&&l.elements.push(h),l},parseASCIINumber:function(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}},parseASCIIElement:function(e,t){for(var r=t.split(/\s+/),n=Object(),i=0;i<e.length;i++)if("list"===e[i].type){for(var s=[],a=this.parseASCIINumber(r.shift(),e[i].countType),o=0;o<a;o++)s.push(this.parseASCIINumber(r.shift(),e[i].itemType));n[e[i].name]=s}else n[e[i].name]=this.parseASCIINumber(r.shift(),e[i].type);return n},parseASCII:function(e){var t,r=new THREE.Geometry,n=this.parseHeader(e),i=/end_header\s([\s\S]*)$/,s="";null!==(t=i.exec(e))&&(s=t[1]);var a=s.split("\n"),o=0,l=0;r.useColor=!1;for(var c=0;c<a.length;c++){var h=a[c];if(h=h.trim(),""!==h){l>=n.elements[o].count&&(o++,l=0);var m=this.parseASCIIElement(n.elements[o].properties,h);this.handleElement(r,n.elements[o].name,m),l++}}return this.postProcess(r)},postProcess:function(e){if(e.useColor){for(var t=0;t<e.faces.length;t++)e.faces[t].vertexColors=[e.colors[e.faces[t].a],e.colors[e.faces[t].b],e.colors[e.faces[t].c]];e.elementsNeedUpdate=!0}return e.computeBoundingSphere(),e},handleElement:function(e,t,r){if("vertex"===t){if(e.vertices.push(new THREE.Vector3(r.x,r.y,r.z)),"red"in r&&"green"in r&&"blue"in r){e.useColor=!0;var n=new THREE.Color;n.setRGB(r.red/255,r.green/255,r.blue/255),e.colors.push(n)}}else if("face"===t){var i=r.vertex_indices||r.vertex_index;3===i.length?e.faces.push(new THREE.Face3(i[0],i[1],i[2])):4===i.length&&e.faces.push(new THREE.Face3(i[0],i[1],i[3]),new THREE.Face3(i[1],i[2],i[3]))}},binaryRead:function(e,t,r,n){switch(r){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,n),2];case"uint16":case"ushort":return[e.getUint16(t,n),2];case"int32":case"int":return[e.getInt32(t,n),4];case"uint32":case"uint":return[e.getUint32(t,n),4];case"float32":case"float":return[e.getFloat32(t,n),4];case"float64":case"double":return[e.getFloat64(t,n),8]}},binaryReadElement:function(e,t,r,n){for(var i,s=Object(),a=0,o=0;o<r.length;o++)if("list"===r[o].type){var l=[];i=this.binaryRead(e,t+a,r[o].countType,n);var c=i[0];a+=i[1];for(var h=0;h<c;h++)i=this.binaryRead(e,t+a,r[o].itemType,n),l.push(i[0]),a+=i[1];s[r[o].name]=l}else i=this.binaryRead(e,t+a,r[o].type,n),s[r[o].name]=i[0],a+=i[1];return[s,a]},parseBinary:function(e){for(var t,r=new THREE.Geometry,n=this.parseHeader(this.bin2str(e)),i="binary_little_endian"===n.format,s=new DataView(e,n.headerLength),a=0,o=0;o<n.elements.length;o++)for(var l=0;l<n.elements[o].count;l++){t=this.binaryReadElement(s,a,n.elements[o].properties,i),a+=t[1];var c=t[0];this.handleElement(r,n.elements[o].name,c)}return this.postProcess(r)}}},{}],3:[function(e,t,r){t.exports={"ply-model":e("./ply-model"),"three-model":e("./three-model"),registerAll:function(e){this._registered||(e=e||window.AFRAME,e=e.aframeCore||e,e.components["ply-model"]||e.registerComponent("ply-model",this["ply-model"]),e.components["three-model"]||e.registerComponent("three-model",this["three-model"]),this._registered=!0)}}},{"./ply-model":4,"./three-model":5}],4:[function(e,t,r){THREE.PLYLoader=e("../../lib/PLYLoader"),t.exports={schema:{src:{type:"src"}},init:function(){this.model=null},update:function(){var e,t=this.data;return t.src?(this.remove(),e=new THREE.PLYLoader,void e.load(t.src,this.load.bind(this))):void console.warn("[%s] `src` property is required.",this.name)},load:function(e){this.model=new THREE.Mesh(e,new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading,vertexColors:THREE.VertexColors,shininess:0})),this.el.setObject3D("mesh",this.model),this.el.emit("model-loaded",{format:"ply",model:this.model})},remove:function(){this.model&&this.el.removeObject3D("mesh")}}},{"../../lib/PLYLoader":2}],5:[function(e,t,r){t.exports={schema:{src:{type:"src"},loader:{"default":"object",oneOf:["object","json"]},animation:{"default":""}},init:function(){this.model=null,this.mixer=null},update:function(e){var t,r=this.data;if(r.src)if(e)r.animation!==e.animation&&this.model.activeAction&&(this.model.activeAction.stop(),this.playAnimation());else if(this.remove(),"object"===r.loader)t=new THREE.ObjectLoader,t.load(r.src,this.load.bind(this));else{if("json"!==r.loader)throw new Error('[three-model] Invalid mode "%s".',r.mode);t=new THREE.JSONLoader,t.load(r.src,function(e,t){this.load(new THREE.Mesh(e,new THREE.MeshFaceMaterial(t)))}.bind(this))}},load:function(e){this.model=e,this.mixer=new THREE.AnimationMixer(this.model),this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"three",model:e}),this.data.animation&&this.playAnimation()},playAnimation:function(){var e=this.data,t=this.model.animations||this.model.geometry.animations,r=THREE.AnimationClip.findByName(t,e.animation);this.model.activeAction=this.mixer.clipAction(r,this.model).play()},remove:function(){this.mixer&&this.mixer.stopAllAction(),this.model&&this.el.removeObject3D("mesh")},tick:function(e,t){this.mixer&&!isNaN(t)&&this.mixer.update(t/1e3)}}},{}]},{},[1]);